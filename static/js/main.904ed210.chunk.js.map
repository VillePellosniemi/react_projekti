{"version":3,"sources":["utils/MediaAPI.js","components/ImageGrid.js","components/ImageEditor.js","views/Upload.js","views/Messages.js","views/Input.js","views/ChatPotApp.js","views/Front.js","views/ShareButton.js","views/Likes.js","views/Single.js","components/Nav.js","views/Login.js","views/Profile.js","views/Logout.js","views/MyFiles.js","views/Modify.js","views/Chat.js","App.js","serviceWorker.js","index.js"],"names":["apiUrl","handleFetchErrors","response","ok","Error","statusText","getAllMedia","fetch","then","json","console","log","Promise","all","map","pic","file_id","pics","getMediaFromUser","id","getSingleMedia","login","username","password","settings","method","headers","Content-Type","body","JSON","stringify","register","user","checkUser","getFilesByTag","tag","upload","data","token","x-access-token","modify","options","Content-type","deleteMedia","getFilters","text","defaultFilters","re","RegExp","parse","exec","e","getDescription","mediaUrl","getFiltersToGrid","tile","_getFilters","description","brightness","contrast","warmth","saturation","filter","concat","ImageGrid","props","react_default","a","createElement","index_es","cols","picArray","key","media_type","src","thumbnails","w160","alt","title","style","screenshot","actionIcon","Fragment","component","Link","to","icons_index_es","color","edit","onClick","deleteFile","ImageEditor","state","_this","rangeReducer","rawValue","name","value","Math","round","setState","prevState","filters","Object","objectSpread","defineProperty","updateFilters","imageData","undefined","this","file","filename","className","lab_index_es","valueReducer","min","max","step","aria-labelledby","Component","Upload","fr","FileReader","filedata","loading","type","handleFileChange","evt","persist","target","files","readAsDataURL","handleInputChange","handleFileSubmit","fd","FormData","append","localStorage","getItem","setTimeout","history","push","updateImages","newFilters","_this2","addEventListener","result","lib","instantValidate","onSubmit","onError","errors","marginTop","label","onChange","validators","errorMessages","fullWidth","marginBottom","multiline","variant","size","includes","components_ImageEditor","Messages","messages","m","renderMessage","message","member","currentMember","backgroundColor","clientData","Input","preventDefault","onSendMessage","placeholder","autofocus","randomName","adjectives","nouns","floor","random","length","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","toString","drone","publish","room","window","Scaledrone","on","error","clientId","subscribe","views_Messages","views_Input","Front","Grid_default","item","sm","react_custom_scrollbars_lib","class","width","height","components_ImageGrid","ChatPotApp","views_Upload","ShareButton","data-href","data-layout","Likes","liked","handleClick","bind","assertThisInitialized","React","Single","user_id","match","params","_this$state$file","_this$state$filters","goBack","controls","views_ShareButton","views_Likes","ButtonAppBar","left","toggleDrawer","side","open","classes","sideList","list","List_default","ListItem_default","padding","button","ListItemIcon_default","ListItemText_default","primary","checkLogin","root","AppBar_default","position","Toolbar_default","IconButton_default","aria-label","Drawer_default","paper","drawerPaper","onClose","tabIndex","role","onKeyDown","Typography_default","grow","Button_default","margin","withStyles","flexGrow","menuButton","marginLeft","marginRight","drawerHeader","display","alignItems","justifyContent","Login","email","full_name","repeatPassword","formToggler","validUser","handleLoginSubmit","doLogin","handleRegisterSubmit","setUser","setItem","catch","err","checkUsername","available","toggleForm","ValidatorForm","addValidationRule","required","paddingLeft","alert","theme","container","red","Profile","react_router","_props$user","image","gutterBottom","Logout","removeItem","setUserLogout","MyFiles","updateUserImages","confirm","Modify","rows","section","Chat","xs","md","profilePic","outputFile","react_router_dom","basename","core_Grid_default","components_Nav","path","render","views_Front","assign","views_Profile","videos","views_MyFiles","exact","views_Login","views_Logout","Boolean","location","hostname","ReactDOM","src_App_0","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.904ed210.chunk.js","sourcesContent":["const apiUrl = 'http://media.mw.metropolia.fi/wbma/';\r\n\r\nconst handleFetchErrors = (response) => {\r\n  if (!response.ok) {\r\n    throw Error(response.statusText);\r\n  }\r\n  return response;\r\n};\r\n\r\nconst getAllMedia = () => {\r\n  return fetch(apiUrl + 'media/').then(response => {\r\n    return response.json();\r\n  }).then(json => {\r\n    console.log(json);\r\n    return Promise.all(json.map(pic => {\r\n      return fetch(apiUrl + 'media/' + pic.file_id).then(response => {\r\n        return response.json();\r\n      });\r\n    })).then(pics => {\r\n      console.log(pics);\r\n      return pics;\r\n    });\r\n  });\r\n};\r\n\r\nconst getMediaFromUser = (id) => {\r\n  return fetch(apiUrl + 'media/user/' + id).then(response => {\r\n    return response.json();\r\n  }).then(json => {\r\n    console.log(json);\r\n    return Promise.all(json.map(pic => {\r\n      return fetch(apiUrl + 'media/' + pic.file_id).then(response => {\r\n        return response.json();\r\n      });\r\n    })).then(pics => {\r\n      console.log(pics);\r\n      return pics;\r\n    });\r\n  });\r\n};\r\n\r\nconst getSingleMedia = (id) => {\r\n  return fetch(apiUrl + 'media/' + id).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst login = (username, password) => {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({username, password}),\r\n  };\r\n  return fetch(apiUrl + 'login', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst register = (user) => {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(user),\r\n  };\r\n  return fetch(apiUrl + 'users', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst getUser = (token) => {\r\n  const settings = {\r\n    headers: {\r\n      'x-access-token': token,\r\n    },\r\n  };\r\n  return fetch(apiUrl + 'users/user', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst checkUser = (username) => {\r\n  return fetch(apiUrl + 'users/username/' + username).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst getFilesByTag = (tag) => {\r\n  return fetch(apiUrl + 'tags/' + tag).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst upload = (data, token) => {\r\n  const options = {\r\n    method: 'POST',\r\n    body: data,\r\n    headers: {\r\n      'x-access-token': token,\r\n    },\r\n  };\r\n\r\n  return fetch(apiUrl + 'media', options).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst modify = (id, data, token) => {\r\n  const options = {\r\n    method: 'PUT',\r\n    body: JSON.stringify(data),\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n      'x-access-token': token,\r\n    },\r\n  };\r\n\r\n  return fetch(apiUrl + 'media/' + id, options)\r\n  .then(handleFetchErrors)\r\n  .then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst deleteMedia = (id, token) => {\r\n  const options = {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'x-access-token': token,\r\n    },\r\n  };\r\n\r\n  return fetch(apiUrl + 'media/' + id, options)\r\n  .then(handleFetchErrors)\r\n  .then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst getFilters = (text, defaultFilters) => {\r\n  const pattern = '\\\\[f\\\\](.*?)\\\\[\\\\/f\\\\]';\r\n  const re = new RegExp(pattern);\r\n  try {\r\n    return JSON.parse(re.exec(text)[1]);\r\n  } catch (e) {\r\n    // console.log(e);\r\n    return defaultFilters;\r\n  }\r\n};\r\n\r\nconst getDescription = (text) => {\r\n  const pattern = '\\\\[d\\\\]((.|[\\\\r\\\\n])*?)\\\\[\\\\/d\\\\]';\r\n  const re = new RegExp(pattern);\r\n  console.log(re.exec(text));\r\n  try {\r\n    return re.exec(text)[1];\r\n  } catch (e) {\r\n    return text;\r\n  }\r\n};\r\n\r\nexport {\r\n  getAllMedia,\r\n  getSingleMedia,\r\n  login,\r\n  register,\r\n  getUser,\r\n  getFilesByTag,\r\n  checkUser,\r\n  getMediaFromUser,\r\n  getFilters,\r\n  getDescription,\r\n  handleFetchErrors,\r\n  upload,\r\n  modify,\r\n  deleteMedia,\r\n};\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  GridList,\r\n  GridListTile,\r\n  GridListTileBar,\r\n  IconButton,\r\n} from '@material-ui/core';\r\nimport {\r\n  OpenWith,\r\n  Photo,\r\n  VideoLabel,\r\n  Audiotrack,\r\n  Settings, Delete,\r\n} from '@material-ui/icons';\r\nimport {getFilters} from '../utils/MediaAPI';\r\n\r\nconst mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n\r\nconst getFiltersToGrid = (tile) => {\r\n  const filters = {\r\n    brightness: 100,\r\n    contrast: 100,\r\n    warmth: 0,\r\n    saturation: 100,\r\n  };\r\n  const {brightness, contrast, saturation, warmth} = getFilters(\r\n      tile.description, filters);\r\n  const f = {filter: `brightness(${brightness}%) contrast(${contrast}%) sepia(${warmth}%) saturate(${saturation}%)`};\r\n  return f;\r\n};\r\n\r\nconst ImageGrid = (props) => {\r\n  return (\r\n      <div id=\"kuvat\">\r\n        <GridList cols={4}>\r\n          {props.picArray.map(tile => (\r\n              <GridListTile key={tile.file_id}>\r\n                {tile.media_type === 'image' &&\r\n                <img src={mediaUrl + tile.thumbnails.w160} alt={tile.title}\r\n                     style={getFiltersToGrid(tile)}/>\r\n                }\r\n                {tile.media_type === 'video' &&\r\n                <img src={mediaUrl + tile.screenshot} alt={tile.title}/>\r\n                }\r\n                {tile.media_type === 'audio' &&\r\n                <img src=\"http://placekitten.com/400/400\" alt={tile.title}/>\r\n                }\r\n                <GridListTileBar\r\n                    title={tile.title}\r\n                    actionIcon={\r\n                      <React.Fragment>\r\n                        <IconButton component={Link}\r\n                                    to={'single/' + tile.file_id}>\r\n                          <OpenWith style={{color: 'white'}} />\r\n                        </IconButton>\r\n                        {props.edit &&\r\n                        <React.Fragment>\r\n                          <IconButton component={Link}\r\n                                      to={'modify/' + tile.file_id}>\r\n                            <Settings style={{color: 'white'}}/>\r\n                          </IconButton>\r\n                          <IconButton onClick={() => {\r\n                            props.deleteFile(tile.file_id);\r\n                          }}>\r\n                            <Delete style={{color: 'white'}}/>\r\n                          </IconButton>\r\n                        </React.Fragment>}\r\n                      </React.Fragment>\r\n                    }\r\n                />\r\n              </GridListTile>\r\n          ))}\r\n        </GridList>\r\n      </div>\r\n  );\r\n};\r\n\r\nImageGrid.propTypes = {\r\n  picArray: PropTypes.array,\r\n  edit: PropTypes.bool,\r\n  deleteFile: PropTypes.func,\r\n};\r\n\r\nexport default ImageGrid;\r\n","import React, {Component} from 'react';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Slider} from '@material-ui/lab';\r\nimport PropTypes from 'prop-types';\r\nimport './css/imageEditor.css';\r\n\r\nclass ImageEditor extends Component {\r\n\r\n  mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n\r\n  state = this.props.state;\r\n\r\n  rangeReducer = (rawValue, props) => {\r\n    console.log(rawValue);\r\n    const {name} = props;\r\n    const value = Math.round(rawValue);\r\n    this.setState((prevState) => ({\r\n      filters: {\r\n        ...prevState.filters,\r\n        [name]: value,\r\n      },\r\n    }), () => {\r\n      this.props.updateFilters(this.state.filters);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let imageData = '';\r\n    if (this.state.imageData === undefined || this.state.imageData === null) {\r\n      console.log('if', this.state.imageData);\r\n      imageData = this.mediaUrl + this.state.file.filename;\r\n    } else {\r\n      console.log('else');\r\n      imageData = this.state.imageData;\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n          <img src={imageData} alt=\"preview\"\r\n               className={'image'}\r\n               style={{filter: `brightness(${this.state.filters.brightness}%) contrast(${this.state.filters.contrast}%) sepia(${this.state.filters.warmth}%) saturate(${this.state.filters.saturation}%)`}}/>\r\n          <div>\r\n            <Typography\r\n                id=\"brightness-label\">Brightness: {this.state.filters.brightness}%</Typography>\r\n            <Slider name=\"brightness\" value={this.state.filters.brightness}\r\n                    valueReducer={this.rangeReducer}\r\n                    min={0}\r\n                    max={200}\r\n                    step={1}\r\n                    aria-labelledby=\"brightness-label\"/>\r\n          </div>\r\n          <div>\r\n            <Typography\r\n                id=\"contrast-label\">Contrast: {this.state.filters.contrast}%</Typography>\r\n            <Slider name=\"contrast\" value={this.state.filters.contrast}\r\n                    valueReducer={this.rangeReducer}\r\n                    min={0}\r\n                    max={200}\r\n                    step={1}\r\n                    aria-labelledby=\"contrast-label\"/>\r\n          </div>\r\n          <div>\r\n            <Typography\r\n                id=\"saturation-label\">Saturation: {this.state.filters.saturation}%</Typography>\r\n            <Slider name=\"saturation\" value={this.state.filters.saturation}\r\n                    valueReducer={this.rangeReducer}\r\n                    min={0}\r\n                    max={200}\r\n                    step={1}\r\n                    aria-labelledby=\"saturation-label\"/>\r\n          </div>\r\n          <div>\r\n            <Typography\r\n                id=\"warmth-label\">Warmth: {this.state.filters.warmth}%</Typography>\r\n            <Slider name=\"warmth\" value={this.state.filters.warmth}\r\n                    valueReducer={this.rangeReducer}\r\n                    min={0}\r\n                    max={100}\r\n                    step={1}\r\n                    aria-labelledby=\"warmth-label\"/>\r\n          </div>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nImageEditor.propTypes = {\r\n  updateFilters: PropTypes.func,\r\n  state: PropTypes.object,\r\n};\r\n\r\nexport default ImageEditor;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {ValidatorForm, TextValidator} from 'react-material-ui-form-validator';\r\nimport {Button, CircularProgress} from '@material-ui/core';\r\nimport './css/Upload.css';\r\nimport ImageEditor from '../components/ImageEditor';\r\nimport {upload} from '../utils/MediaAPI';\r\n\r\nclass Upload extends Component {\r\n  mediaUrl = 'http://media.mw.metropolia.fi/wbma/';\r\n  fr = new FileReader();\r\n\r\n  componentDidMount() {\r\n    this.fr.addEventListener('load', () => {\r\n      this.setState((prevState) => ({\r\n        ...prevState,\r\n        imageData: this.fr.result,\r\n      }));\r\n    });\r\n  }\r\n\r\n  state = {\r\n    file: {\r\n      title: '',\r\n      description: '',\r\n      filedata: null,\r\n      filename: undefined,\r\n    },\r\n    loading: false,\r\n    imageData: null,\r\n    filters: {\r\n      brightness: 100,\r\n      contrast: 100,\r\n      warmth: 0,\r\n      saturation: 100,\r\n    },\r\n    type: '',\r\n  };\r\n\r\n  handleFileChange = (evt) => {\r\n    evt.persist();\r\n    console.log(evt.target.files[0]);\r\n    this.fr.readAsDataURL(evt.target.files[0]);\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      type: evt.target.files[0].type,\r\n      file: {\r\n        ...prevState.file,\r\n        filedata: evt.target.files[0],\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleInputChange = (evt) => {\r\n    const target = evt.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    console.log(value, name);\r\n\r\n    this.setState((prevState) => ({\r\n      file: {\r\n        ...prevState.file,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleFileSubmit = (evt) => {\r\n    console.log(evt);\r\n    this.setState({loading: true});\r\n    const fd = new FormData();\r\n    fd.append('title', this.state.file.title);\r\n    const description = `[d]${this.state.file.description}[/d][f]${JSON.stringify(\r\n        this.state.filters)}[/f]`;\r\n    fd.append('description', description);\r\n    fd.append('file', this.state.file.filedata);\r\n\r\n    upload(fd, localStorage.getItem('token')).then(json => {\r\n      console.log(json);\r\n      setTimeout(() => {\r\n        this.props.history.push('/home');\r\n        this.props.updateImages();\r\n        this.setState({loading: false});\r\n      }, 2000);\r\n\r\n    })\r\n  };\r\n\r\n  updateFilters = (newFilters) => {\r\n    this.setState((prevState) => ({\r\n      filters: newFilters,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n        <div id=\"upload\">\r\n          <React.Fragment>\r\n            <h1 id=\"up\">Upload a File</h1>\r\n            <form id=\"uploaddiv\">\r\n              <ValidatorForm instantValidate={false}\r\n                             onSubmit={this.handleFileSubmit}\r\n                             onError={errors => console.log(errors)}>\r\n                <TextValidator style={{marginTop: -5}} name=\"title\" label=\"Title\" id=\"title\"\r\n                               value={this.state.file.title}\r\n                               onChange={this.handleInputChange}\r\n                               validators={['required', 'minStringLength:3']}\r\n                               errorMessages={[\r\n                                 'this field is required',\r\n                                 'minimum 3 charaters']}\r\n                               fullWidth/>\r\n                <TextValidator style={{marginTop: 5, marginBottom: 5}} name=\"description\" label=\"Description\"\r\n                               id=\"description\"\r\n                               value={this.state.file.description}\r\n                               onChange={this.handleInputChange}\r\n                               validators={['required', 'minStringLength:3']}\r\n                               errorMessages={[\r\n                                 'this field is required',\r\n                                 'minimum 3 charaters']}\r\n                               fullWidth\r\n                               multiline/>\r\n                <input name=\"filedata\" id=\"file\"\r\n                           value={this.state.file.filename}\r\n                           type=\"file\"\r\n                           onChange={this.handleFileChange}/><br/>\r\n                <Button id=\"button1\" type=\"submit\" variant=\"contained\"\r\n                        color=\"primary\">Upload&nbsp;&nbsp;{this.state.loading &&\r\n                <CircularProgress size={20} color=\"secondary\"/>}</Button>\r\n              </ValidatorForm>\r\n            </form>\r\n          </React.Fragment>\r\n          <React.Fragment>\r\n            <div id=\"preview2\">\r\n              {this.state.imageData !== null &&\r\n              this.state.type.includes('image') &&\r\n              <ImageEditor state={this.state}\r\n                           updateFilters={this.updateFilters}/>\r\n              }\r\n            </div>\r\n          </React.Fragment>\r\n        </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nUpload.propTypes = {\r\n  history: PropTypes.object,\r\n  updateImages: PropTypes.func,\r\n};\r\n\r\nexport default Upload;\r\n","import {Component} from \"react\";\r\nimport React from \"react\";\r\nimport '../App.css';\r\n\r\nclass Messages extends Component {\r\n    render() {\r\n        const {messages} = this.props;\r\n        return (\r\n            <ul className=\"Messages-list\">\r\n                {messages.map(m => this.renderMessage(m))}\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    renderMessage(message) {\r\n        const {member, text} = message;\r\n        const {currentMember} = this.props;\r\n        const messageFromMe = member.id === currentMember.id;\r\n        const className = messageFromMe ?\r\n            \"Messages-message currentMember\" : \"Messages-message\";\r\n        return (\r\n            <li className={className}>\r\n      <span\r\n          className=\"avatar\"\r\n          style={{backgroundColor: member.clientData.color}}\r\n      />\r\n                <div className=\"Message-content\">\r\n                    <div className=\"username\">\r\n                        {member.clientData.username}\r\n                    </div>\r\n                    <div className=\"text\">{text}</div>\r\n                </div>\r\n            </li>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Messages;\r\n","import {Component} from \"react\";\r\nimport React from \"react\";\r\n\r\nclass Input extends Component {\r\n    state = {\r\n        text: \"\"\r\n    }\r\n\r\n    onChange(e) {\r\n        this.setState({text: e.target.value});\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n        this.setState({text: \"\"});\r\n        this.props.onSendMessage(this.state.text);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Input\">\r\n                <form onSubmit={e => this.onSubmit(e)}>\r\n                    <input id=\"ChatInput\"\r\n                        onChange={e => this.onChange(e)}\r\n                        value={this.state.text}\r\n                        type=\"text\"\r\n                        placeholder=\"Enter your message and press ENTER\"\r\n                        autofocus=\"true\"\r\n                    />\r\n                    <button id=\"ChatButton\">Send</button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Input;\r\n","import React, { Component } from 'react';\r\nimport '../App.css';\r\nimport './css/ChatPot.css';\r\nimport Messages from \"./Messages\";\r\nimport Input from \"./Input\";\r\n\r\nfunction randomName() {\r\n    const adjectives = [\r\n        \"autumn\", \"hidden\", \"bitter\", \"misty\", \"silent\", \"empty\", \"dry\", \"dark\",\r\n        \"summer\", \"icy\", \"delicate\", \"quiet\", \"white\", \"cool\", \"spring\", \"winter\",\r\n        \"patient\", \"twilight\", \"dawn\", \"crimson\", \"wispy\", \"weathered\", \"blue\",\r\n        \"billowing\", \"broken\", \"cold\", \"damp\", \"falling\", \"frosty\", \"green\", \"long\",\r\n        \"late\", \"lingering\", \"bold\", \"little\", \"morning\", \"muddy\", \"old\", \"red\",\r\n        \"rough\", \"still\", \"small\", \"sparkling\", \"throbbing\", \"shy\", \"wandering\",\r\n        \"withered\", \"wild\", \"black\", \"young\", \"holy\", \"solitary\", \"fragrant\",\r\n        \"aged\", \"snowy\", \"proud\", \"floral\", \"restless\", \"divine\", \"polished\",\r\n        \"ancient\", \"purple\", \"lively\", \"nameless\"\r\n    ];\r\n    const nouns = [\r\n        \"waterfall\", \"river\", \"breeze\", \"moon\", \"rain\", \"wind\", \"sea\", \"morning\",\r\n        \"snow\", \"lake\", \"sunset\", \"pine\", \"shadow\", \"leaf\", \"dawn\", \"glitter\",\r\n        \"forest\", \"hill\", \"cloud\", \"meadow\", \"sun\", \"glade\", \"bird\", \"brook\",\r\n        \"butterfly\", \"bush\", \"dew\", \"dust\", \"field\", \"fire\", \"flower\", \"firefly\",\r\n        \"feather\", \"grass\", \"haze\", \"mountain\", \"night\", \"pond\", \"darkness\",\r\n        \"snowflake\", \"silence\", \"sound\", \"sky\", \"shape\", \"surf\", \"thunder\",\r\n        \"violet\", \"water\", \"wildflower\", \"wave\", \"water\", \"resonance\", \"sun\",\r\n        \"wood\", \"dream\", \"cherry\", \"tree\", \"fog\", \"frost\", \"voice\", \"paper\", \"frog\",\r\n        \"smoke\", \"star\"\r\n    ];\r\n    const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];\r\n    const noun = nouns[Math.floor(Math.random() * nouns.length)];\r\n    return adjective + noun;\r\n}\r\n\r\nfunction randomColor() {\r\n    return '#' + Math.floor(Math.random() * 0xFFFFFF).toString(16);\r\n}\r\n\r\nclass App extends Component {\r\n    state = {\r\n        messages: [],\r\n        member: {\r\n            username: randomName(),\r\n            color: randomColor(),\r\n        }\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        this.drone = new window.Scaledrone(\"BmjljJkiutah79dn\", {\r\n            data: this.state.member\r\n        });\r\n        this.drone.on('open', error => {\r\n            if (error) {\r\n                return console.error(error);\r\n            }\r\n            const member = {...this.state.member};\r\n            member.id = this.drone.clientId;\r\n            this.setState({member});\r\n        });\r\n        const room = this.drone.subscribe(\"observable-room\");\r\n        room.on('data', (data, member) => {\r\n            const messages = this.state.messages;\r\n            messages.push({member, text: data});\r\n            this.setState({messages});\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"ChatApp\">\r\n                <div className=\"ChatAppHeader\">\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                    <span></span>\r\n                    <h1>Chatpot</h1>\r\n                </div>\r\n                <Messages\r\n                    messages={this.state.messages}\r\n                    currentMember={this.state.member}\r\n                />\r\n                <Input\r\n                    onSendMessage={this.onSendMessage}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onSendMessage = (message) => {\r\n        this.drone.publish({\r\n            room: \"observable-room\",\r\n            message\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\n// import Table from '../components/Table';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGrid from '../components/ImageGrid';\r\nimport Upload from './Upload';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport './css/Images.css';\r\nimport '../App.css';\r\nimport ChatPotApp from './ChatPotApp';\r\n\r\nconst Front = (props) => {\r\n  const {picArray, messages} = props;\r\n  return (\r\n      <React.Fragment>\r\n        {/* <Table picArray={picArray}/> */}\r\n        <Grid item sm={8}>\r\n          <Scrollbars class=\"scroll\" style={{width: '100%', height: 550, backgroundColor: \"#12355b\"}}>\r\n            <ImageGrid picArray={picArray}/>\r\n          </Scrollbars>\r\n        </Grid>\r\n        <Grid item sm={4}>\r\n          <ChatPotApp />\r\n        </Grid>\r\n        <div>\r\n          <Upload/>\r\n        </div>\r\n      </React.Fragment>\r\n  );\r\n};\r\n\r\nFront.propTypes = {\r\n  picArray: PropTypes.array,\r\n};\r\n\r\nexport default Front;\r\n","import React from 'react'\r\nimport { Facebook, Twitter,} from 'react-sharingbuttons';\r\nimport 'react-sharingbuttons/dist/main.css';\r\n\r\nconst ShareButton = () => {\r\n    const url = 'https://github.com/caspg/react-sharingbuttons'\r\n    const shareText = 'Check this site!'\r\n\r\n    return (\r\n        <div className=\"fb-share-button\"\r\n                 data-href=\"https://www.your-domain.com/your-page.html\"\r\n                 data-layout=\"button_count\">\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default ShareButton;\r\n","import React from 'react';\r\nimport './css/Likes.css';\r\n\r\nclass Likes extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            liked: false };\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick() {\r\n        this.setState({\r\n            liked: !this.state.liked });\r\n\r\n    }\r\n\r\n    render() {\r\n        const text = this.state.liked ? '' : '';\r\n        const label = this.state.liked ? 'Unlike' : 'Liked';\r\n        return (\r\n            React.createElement(\"div\", { className: \"customContainer\" },\r\n                React.createElement(\"button\", { className: \"btn btn-primary\", onClick: this.handleClick },\r\n                    label), React.createElement(\"p\", null, \"you \",\r\n                    text, \" \")));\r\n\r\n\r\n\r\n    }}\r\nexport default Likes;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './css/Single.css';\r\nimport {getSingleMedia, getFilters, getDescription} from '../utils/MediaAPI';\r\nimport {Button} from '@material-ui/core';\r\nimport ShareButton from './ShareButton';\r\nimport Likes from './Likes';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\n\r\nclass Single extends Component {\r\n  mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n  state = {\r\n    file: {\r\n      filename: '',\r\n      title: '',\r\n      description: '[d][/d][f][/f]',\r\n      media_type: 'image/jpg',\r\n      user_id: 1,\r\n    },\r\n    filters: {\r\n      brightness: 100,\r\n      contrast: 100,\r\n      warmth: 0,\r\n      saturation: 100,\r\n    },\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {id} = this.props.match.params;\r\n    getSingleMedia(id).then(pic => {\r\n      console.log('pic', pic);\r\n      console.log('filters', getFilters(pic.description, this.state.filters));\r\n      this.setState({\r\n        file: pic,\r\n        filters: getFilters(pic.description, this.state.filters),\r\n      }, () => {\r\n        console.log('state', this.state);\r\n      });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {title, description, filename, media_type} = this.state.file;\r\n    const {brightness, contrast, saturation, warmth} = this.state.filters;\r\n    return (\r\n        <React.Fragment>\r\n          <Grid item sm={8}>\r\n            <Button id=\"backButton\"\r\n                    onClick={this.props.history.goBack}>Back to Home</Button>\r\n            <div className=\"kuvacontainer\">\r\n              {console.log(media_type)}\r\n              <h1 id=\"test\">Title: {title}</h1>\r\n              <p id=\"test\">Description: {getDescription(description)}\r\n              </p>\r\n              {media_type.includes('image') &&\r\n              <img id=\"image\" src={this.mediaUrl + filename}\r\n                   alt={title}\r\n                   style={{filter: `brightness(${brightness}%) contrast(${contrast}%) sepia(${warmth}%) saturate(${saturation}%)`}}\r\n              />\r\n              }\r\n              {media_type.includes('video') &&\r\n              <video id=\"video\" src={this.mediaUrl + filename}\r\n                     controls\r\n              />}\r\n              {media_type.includes('audio') &&\r\n              <audio id=\"audio\" src={this.mediaUrl + filename}\r\n                     controls\r\n              />}\r\n            </div>\r\n          </Grid>\r\n          <Grid item sm={3}>\r\n            <div id=\"share\">\r\n                  <ShareButton />\r\n                  <Likes />\r\n              </div>\r\n          </Grid>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nSingle.propTypes = {\r\n  match: PropTypes.object,\r\n  user: PropTypes.object,\r\n  history: PropTypes.object,\r\n};\r\n\r\nexport default Single;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport './css/Nav.css';\r\nimport {Home, ExitToApp, VideoLibrary, Person, Menu, Description, Chat} from '@material-ui/icons';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Drawer from '@material-ui/core/Drawer/Drawer';\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n  },\r\n  drawerHeader: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n  },\r\n  drawerPaper: {\r\n    width: '35%',\r\n  },\r\n};\r\n\r\nclass ButtonAppBar extends React.Component {\r\n  state = {\r\n    left: false,\r\n  };\r\n\r\n  toggleDrawer = (side, open) => () => {\r\n    this.setState({\r\n      [side]: open,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {classes} = this.props;\r\n\r\n    const sideList = (\r\n        <div className={classes.list}>\r\n          <List>\r\n            <ListItem style={{padding:20, marginTop: -10}} button component={Link} to=\"/home\">\r\n              <ListItemIcon>\r\n                <Home/>\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Home\"/>\r\n            </ListItem>\r\n            {this.props.checkLogin() &&\r\n            <React.Fragment>\r\n              <ListItem style={{padding:20}} button component={Link} to=\"/chat\">\r\n                <ListItemIcon>\r\n                  <VideoLibrary/>\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"Chat\"/>\r\n              </ListItem>\r\n              <ListItem style={{padding:20}} button component={Link} to=\"/profile\">\r\n                <ListItemIcon>\r\n                  <Person/>\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"Profile\"/>\r\n              </ListItem>\r\n              <ListItem style={{padding:20}} button component={Link} to=\"/my-files\">\r\n                <ListItemIcon>\r\n                  <Description/>\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"My Files\"/>\r\n              </ListItem>\r\n              <ListItem style={{padding:20}} button component={Link} to=\"/logout\">\r\n                <ListItemIcon>\r\n                  <ExitToApp/>\r\n                </ListItemIcon>\r\n                <ListItemText primary=\"Logout\"/>\r\n              </ListItem>\r\n            </React.Fragment>\r\n            }\r\n            {!this.props.checkLogin() &&\r\n            <ListItem style={{padding:20}} button component={Link} to=\"/\">\r\n              <ListItemIcon>\r\n                <ExitToApp/>\r\n              </ListItemIcon>\r\n              <ListItemText primary=\"Login\"/>\r\n            </ListItem>\r\n            }\r\n          </List>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n          <AppBar id=\"appbar\" position=\"static\">\r\n            <Toolbar>\r\n              <IconButton id=\"menu\" onClick={this.toggleDrawer('left', true)} color=\"inherit\" aria-label=\"Menu\">\r\n                <Menu />\r\n              </IconButton>\r\n              <Drawer type=\"temporary\"\r\n                      classes={{\r\n                        paper: classes.drawerPaper,\r\n                      }} open={this.state.left} onClose={this.toggleDrawer('left', false)}>\r\n                <div\r\n                    tabIndex={0}\r\n                    role=\"button\"\r\n                    onClick={this.toggleDrawer('left', false)}\r\n                    onKeyDown={this.toggleDrawer('left', false)}\r\n                >\r\n                  {sideList}\r\n                </div>\r\n              </Drawer>\r\n              <h1 id=\"header\">Masentaa!</h1>\r\n              <Typography variant=\"h6\" color=\"inherit\"\r\n                          className={classes.grow}/>\r\n              <Button color=\"inherit\" button component={Link} to=\"/home\"\r\n                      className=\"hidden\"><Home/>Home</Button>\r\n              <Button color=\"inherit\" button component={Link} to=\"/home\"\r\n                      className=\"hidden\"><Home/>Home</Button>\r\n              <Button style={{margin: 10}} color=\"inherit\" button\r\n                      component={Link} to=\"/home\"\r\n                      className=\"link\"><Home/>Home</Button>\r\n              {this.props.checkLogin() &&\r\n              <React.Fragment>\r\n                <Button style={{margin: 10}} color=\"inherit\" button\r\n                        component={Link} to=\"/chat\"\r\n                        className=\"link\"><Chat/>Chat</Button>\r\n                <Button style={{margin: 10}} color=\"inherit\" button\r\n                        component={Link} to=\"/profile\"\r\n                        className=\"link\"><Person/>Profile</Button>\r\n                <Button style={{margin: 10}} color=\"inherit\" button\r\n                        component={Link} to=\"/my-files\"\r\n                        className=\"link\"><VideoLibrary/>Files</Button>\r\n                <Button style={{margin: 10}} color=\"inherit\" button\r\n                        component={Link} to=\"/logout\"\r\n                        className=\"link\"><ExitToApp/>Logout</Button>\r\n              </React.Fragment>\r\n              }\r\n              {!this.props.checkLogin() &&\r\n              <React.Fragment>\r\n                <Button style={{margin: 10}} color=\"inherit\" button\r\n                        component={Link} to=\"/\" className=\"link\"><ExitToApp/>Login</Button>\r\n              </React.Fragment>\r\n              }\r\n            </Toolbar>\r\n          </AppBar>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nButtonAppBar.propTypes = {\r\n  checkLogin: PropTypes.func,\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(ButtonAppBar);\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {login, register, getUser, checkUser} from '../utils/MediaAPI';\r\nimport {TextField, Button} from '@material-ui/core';\r\nimport {Send} from '@material-ui/icons';\r\nimport {ValidatorForm, TextValidator} from 'react-material-ui-form-validator';\r\nimport red from '@material-ui/core/colors/red';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport './css/Login.css';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    width: '50%',\r\n    padding: '1rem',\r\n  },\r\n  button: {\r\n    marginLeft: 5,\r\n  },\r\n  alert: {\r\n    color: red[500],\r\n  },\r\n});\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    user: {\r\n      username: '',\r\n      password: '',\r\n      email: '',\r\n      full_name: '',\r\n      repeatPassword: '',\r\n    },\r\n    message: '',\r\n    formToggler: true,\r\n    validUser: true,\r\n  };\r\n\r\n  handleLoginSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    this.doLogin();\r\n  };\r\n\r\n  handleRegisterSubmit = () => {\r\n    const user = {...this.state.user};\r\n    delete user.repeatPassword;\r\n    register(user).then(user => {\r\n      console.log(user);\r\n      if (user.message !== undefined) {\r\n        this.setState({message: user.message});\r\n        return;\r\n      }\r\n      this.doLogin();\r\n    });\r\n  };\r\n\r\n  doLogin = () => {\r\n    login(this.state.user.username, this.state.user.password).then(response => {\r\n      console.log(response);\r\n      if (response.user !== undefined) {\r\n        this.props.setUser(response.user);\r\n        localStorage.setItem('token', response.token);\r\n        this.props.history.push('/home');\r\n      } else {\r\n        this.setState({message: response.message});\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });\r\n  };\r\n\r\n  handleInputChange = (evt) => {\r\n    const target = evt.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    console.log(value, name);\r\n\r\n    this.setState((prevState) => ({\r\n      user: {\r\n        ...prevState.user,\r\n        [name]: value,\r\n\r\n      },\r\n    }));\r\n\r\n    if (name === 'username') {\r\n      this.checkUsername(target.value);\r\n    }\r\n  };\r\n\r\n  checkUsername = (username) => {\r\n    checkUser(username).then((result) => {\r\n      console.log(result.available);\r\n      this.setState({validUser: result.available});\r\n    });\r\n  };\r\n\r\n  toggleForm = () => {\r\n    this.setState({formToggler: !this.state.formToggler});\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(localStorage.getItem('token'));\r\n    if (localStorage.getItem('token') !== null) {\r\n      getUser(localStorage.getItem('token')).then(response => {\r\n        this.props.setUser(response);\r\n        this.props.history.push('/home');\r\n      });\r\n    }\r\n    // custom rule will have name 'isPasswordMatch'\r\n    ValidatorForm.addValidationRule('isPasswordMatch', (value) => {\r\n      return value === this.state.user.password;\r\n    });\r\n    ValidatorForm.addValidationRule('isUserAvailable', () => {\r\n      return this.state.validUser;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {classes} = this.props;\r\n    return (\r\n        <div className=\"container\">\r\n          {this.state.formToggler &&\r\n          <React.Fragment>\r\n            <form id=\"login\" onSubmit={this.handleLoginSubmit}>\r\n              <h1 className=\"header\">Login</h1>\r\n              <TextField required fullWidth name=\"username\" id=\"username\"\r\n                         label=\"Username\"\r\n                         value={this.state.user.username}\r\n                         onChange={this.handleInputChange}/>\r\n              <br/>\r\n              <TextField required fullWidth name=\"password\" type=\"password\"\r\n                         id=\"password\"\r\n                         label=\"Password\"\r\n                         value={this.state.user.password}\r\n                         onChange={this.handleInputChange}/>\r\n              <br/>\r\n              <Button id=\"button\" variant=\"contained\"\r\n                      type=\"submit\">Login<Send style={{paddingLeft: 6}}/>\r\n              </Button>\r\n              <Button id=\"button2\" variant=\"contained\"\r\n                      onClick={this.toggleForm}>No account yet?<br/>Register here!\r\n              </Button>\r\n              <p className={classes.alert}>\r\n                {this.state.message}\r\n              </p>\r\n            </form>\r\n          </React.Fragment>\r\n          }\r\n\r\n          {!this.state.formToggler &&\r\n          <React.Fragment>\r\n            <ValidatorForm id=\"register\" instantValidate={false} onSubmit={this.handleRegisterSubmit}\r\n                           onError={errors => console.log(errors)}>\r\n              <h1 className=\"header\">Register</h1>\r\n              <TextValidator fullWidth required name=\"username\" id=\"username\"\r\n                             label=\"Username\"\r\n                             value={this.state.user.username}\r\n                             onChange={this.handleInputChange}\r\n                             validators={[\r\n                               'required',\r\n                               'minStringLength:3',\r\n                               'isUserAvailable']}\r\n                             errorMessages={[\r\n                               'this field is required',\r\n                               'minimum 3 charaters',\r\n                               'username not available']}/>\r\n              <TextValidator fullWidth required name=\"password\" type=\"password\"\r\n                             id=\"password\"\r\n                             label=\"Password\"\r\n                             value={this.state.user.password}\r\n                             onChange={this.handleInputChange}\r\n                             validators={['required', 'minStringLength:5']}\r\n                             errorMessages={[\r\n                               'this field is required',\r\n                               'minimum 5 characters']}/>\r\n              <TextValidator fullWidth required name=\"repeatPassword\" type=\"password\"\r\n                             id=\"repeatPassword\"\r\n                             label=\"Repeat password\"\r\n                             value={this.state.user.repeatPassword}\r\n                             onChange={this.handleInputChange}\r\n                             validators={['isPasswordMatch', 'required']}\r\n                             errorMessages={[\r\n                               'password mismatch',\r\n                               'this field is required']}/>\r\n              <TextValidator fullWidth required name=\"email\"\r\n                             id=\"email\"\r\n                             label=\"Email\"\r\n                             value={this.state.user.email}\r\n                             onChange={this.handleInputChange}\r\n                             validators={['required', 'isEmail']}\r\n                             errorMessages={[\r\n                               'this field is required',\r\n                               'email is not valid']}/>\r\n              <TextField fullWidth required name=\"full_name\" id=\"full_name\"\r\n                         label=\"Full name\"\r\n                         value={this.state.user.full_name}\r\n                         onChange={this.handleInputChange}/>\r\n              <Button id=\"button\" variant=\"contained\"\r\n                      type=\"submit\">Register<Send style={{paddingLeft: 6}}/></Button>\r\n              <Button id=\"button2\" variant=\"contained\"\r\n                      onClick={this.toggleForm}>Already got an<br/>account? Log in!\r\n              </Button>\r\n              <p className={classes.alert}>\r\n                {this.state.message}\r\n              </p>\r\n            </ValidatorForm>\r\n          </React.Fragment>\r\n          }\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  setUser: PropTypes.func,\r\n  history: PropTypes.object,\r\n  classes: PropTypes.object,\r\n};\r\n\r\nexport default withStyles(styles)(Login);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Redirect} from 'react-router-dom';\r\nimport './css/Profile.css';\r\nimport {\r\n  Card,\r\n  CardActionArea,\r\n  CardContent,\r\n  CardMedia,\r\n  Typography,\r\n} from '@material-ui/core';\r\n\r\n\r\nconst Profile = (props) => {\r\n  if (props.user === null) {\r\n    return <Redirect to=\"/\"/>;\r\n  }\r\n\r\n  const {username, email, full_name} = props.user;\r\n  return (\r\n      <div id=\"profilecontainer\">\r\n        <React.Fragment>\r\n          <Card id=\"card\">\r\n            <h1 className=\"profile\">Your Profile</h1>\r\n            <CardActionArea>\r\n              <CardMedia className=\"media\"\r\n                         image={'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/1024px-Circle-icons-profile.svg.png'}\r\n                         title={username}/>\r\n              <CardContent>\r\n                <Typography id=\"profileuser\" gutterBottom variant=\"h5\" component=\"h2\">\r\n                  {username}\r\n                </Typography>\r\n                <Typography id=\"profilecontent\" component=\"p\">\r\n                  Email: {email}\r\n                </Typography>\r\n                <Typography id=\"profilecontent\" component=\"p\">\r\n                  Full name: {full_name}\r\n                </Typography>\r\n              </CardContent>\r\n            </CardActionArea>\r\n          </Card>\r\n        </React.Fragment>\r\n      </div>\r\n  );\r\n};\r\n\r\nProfile.propTypes = {\r\n  user: PropTypes.object,\r\n};\r\n\r\nexport default Profile;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Logout extends Component {\r\n\r\n  componentDidMount() {\r\n    localStorage.removeItem('token');\r\n    this.props.setUserLogout(null);\r\n    this.props.history.push('/');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <React.Fragment>\r\n          <h1>Logout</h1>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nLogout.propTypes = {\r\n  setUserLogout: PropTypes.func,\r\n  history: PropTypes.object,\r\n};\r\n\r\nexport default Logout;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ImageGrid from '../components/ImageGrid';\r\nimport {deleteMedia, getMediaFromUser} from '../utils/MediaAPI';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport {Scrollbars} from 'react-custom-scrollbars';\r\nimport './css/MyFiles.css';\r\n\r\nclass MyFiles extends Component {\r\n  state = {\r\n    picArray: [],\r\n  };\r\n\r\n  updateUserImages = () => {\r\n    getMediaFromUser(this.props.user.user_id).then((pics) => {\r\n      console.log(pics);\r\n      this.setState({picArray: pics});\r\n    });\r\n  };\r\n\r\n  deleteFile = (id) => {\r\n    console.log('delete', id);\r\n    const cnfrm = window.confirm('Delete File?');\r\n    if (!cnfrm) {\r\n      return;\r\n    }\r\n\r\n    deleteMedia(id, localStorage.getItem('token')).then(response => {\r\n      this.updateUserImages();\r\n    }).catch(err => {\r\n      console.log(err);\r\n    });\r\n\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (!this.props.user) {\r\n      this.props.history.push('/');\r\n    } else {\r\n      this.updateUserImages();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div id=\"myfiles-div\">\r\n          <div id=\"myfiles-content\">\r\n            <h1 id=\"myfiles-header\">Your Uploaded Files</h1>\r\n            <Scrollbars class=\"scroll\" style={{height: 500, width: '100%'}}>\r\n              <ImageGrid picArray={this.state.picArray} edit={true}\r\n                       deleteFile={this.deleteFile}/>\r\n            </Scrollbars>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nMyFiles.propTypes = {\r\n  user: PropTypes.object,\r\n  history: PropTypes.object,\r\n};\r\n\r\nexport default MyFiles;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {ValidatorForm, TextValidator} from 'react-material-ui-form-validator';\r\nimport {Button, CircularProgress} from '@material-ui/core';\r\nimport './css/Upload.css';\r\nimport ImageEditor from '../components/ImageEditor';\r\nimport {\r\n  getSingleMedia,\r\n  getFilters,\r\n  getDescription,\r\n  modify,\r\n} from '../utils/MediaAPI';\r\n\r\nclass Modify extends Component {\r\n  mediaUrl = 'http://media.mw.metropolia.fi/wbma/';\r\n\r\n  state = {\r\n    file: {\r\n      title: '',\r\n      description: '',\r\n      filedata: null,\r\n      filename: undefined,\r\n      file_id: 0,\r\n    },\r\n    loading: false,\r\n    imageData: null,\r\n    filters: {\r\n      brightness: 100,\r\n      contrast: 100,\r\n      warmth: 0,\r\n      saturation: 100,\r\n    },\r\n    type: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {id} = this.props.match.params;\r\n    getSingleMedia(id).then(pic => {\r\n      console.log('pic', pic);\r\n      console.log('filters', getFilters(pic.description, this.state.filters));\r\n      this.setState({\r\n        file: pic,\r\n        filters: getFilters(pic.description, this.state.filters),\r\n      }, () => {\r\n        console.log('state', this.state);\r\n      });\r\n    });\r\n  }\r\n\r\n  handleFileChange = (evt) => {\r\n    evt.persist();\r\n    console.log(evt.target.files[0]);\r\n    this.fr.readAsDataURL(evt.target.files[0]);\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      type: evt.target.files[0].type,\r\n      file: {\r\n        ...prevState.file,\r\n        filedata: evt.target.files[0],\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleInputChange = (evt) => {\r\n    const target = evt.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    console.log(value, name);\r\n\r\n    this.setState((prevState) => ({\r\n      file: {\r\n        ...prevState.file,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleFileSubmit = (evt) => {\r\n    console.log(evt);\r\n    this.setState({loading: true});\r\n    const data = {\r\n      title: this.state.file.title,\r\n      description: `[d]${getDescription(\r\n          this.state.file.description)}[/d][f]${JSON.stringify(\r\n          this.state.filters)}[/f]`,\r\n    };\r\n\r\n    modify(this.state.file.file_id, data, localStorage.getItem('token'))\r\n    .then(json => {\r\n      console.log(json);\r\n      setTimeout(() => {\r\n        this.setState({loading: false});\r\n        this.props.history.push('/my-files');\r\n      }, 2000);\r\n\r\n    })\r\n    .catch(err => {\r\n      console.log('error', err);\r\n    });\r\n  };\r\n\r\n  updateFilters = (newFilters) => {\r\n    this.setState((prevState) => ({\r\n      filters: newFilters,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n        <React.Fragment>\r\n          <h1>Modify</h1>\r\n          <ValidatorForm instantValidate={false}\r\n                         onSubmit={this.handleFileSubmit}\r\n                         onError={errors => console.log(errors)}>\r\n            <TextValidator name=\"title\" label=\"Title\"\r\n                           value={this.state.file.title}\r\n                           onChange={this.handleInputChange}\r\n                           validators={['required', 'minStringLength:3']}\r\n                           errorMessages={[\r\n                             'this field is required',\r\n                             'minimum 3 charaters']}\r\n                           fullWidth/>\r\n            <TextValidator name=\"description\" label=\"Description\"\r\n                           value={getDescription(this.state.file.description)}\r\n                           onChange={this.handleInputChange}\r\n                           validators={['required', 'minStringLength:3']}\r\n                           errorMessages={[\r\n                             'this field is required',\r\n                             'minimum 3 charaters']}\r\n                           fullWidth\r\n                           multiline\r\n                           rows={3}/>\r\n            <Button type=\"submit\" variant=\"contained\"\r\n                    color=\"primary\">Save&nbsp;&nbsp;{this.state.loading &&\r\n            <CircularProgress size={20} color=\"secondary\"/>}</Button>\r\n          </ValidatorForm>\r\n          {this.state.file.filename !== undefined &&\r\n          < ImageEditor state={this.state} updateFilters={this.updateFilters}/>\r\n          }\r\n        </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nModify.propTypes = {\r\n  history: PropTypes.object,\r\n  updateImages: PropTypes.func,\r\n  match: PropTypes.object,\r\n};\r\n\r\nexport default Modify;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid/Grid';\r\nimport './css/Chat.css';\r\nimport ChatPotApp from './ChatPotApp';\r\n\r\nconst section = {\r\n  height: \"665px\",\r\n};\r\n\r\nconst Chat = () => {\r\n  return (\r\n      <React.Fragment id=\"chat-kokosivu\">\r\n        <Grid item xs={4} md={12}>\r\n          <div style={section}><ChatPotApp/></div>\r\n        </Grid>\r\n      </React.Fragment>\r\n  );\r\n};\r\n\r\n\r\nexport default Chat;\r\n","import React, {Component} from 'react';\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\nimport {getAllMedia, getFilesByTag} from './utils/MediaAPI';\r\nimport Front from './views/Front';\r\nimport Single from './views/Single';\r\nimport Nav from './components/Nav';\r\nimport Login from './views/Login';\r\nimport Profile from './views/Profile';\r\nimport Logout from './views/Logout';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Upload from './views/Upload';\r\nimport MyFiles from './views/MyFiles';\r\nimport Modify from './views/Modify';\r\nimport Input from './views/Input';\r\nimport './App.css';\r\nimport ChatPotApp from './views/ChatPotApp';\r\nimport Chat from './views/Chat';\r\n\r\n\r\n//chat-pot random generaattori\r\nfunction randomName() {\r\n  const adjectives = [\r\n    \"autumn\", \"hidden\", \"bitter\", \"misty\", \"silent\", \"empty\", \"dry\", \"dark\",\r\n    \"summer\", \"icy\", \"delicate\", \"quiet\", \"white\", \"cool\", \"spring\", \"winter\",\r\n    \"patient\", \"twilight\", \"dawn\", \"crimson\", \"wispy\", \"weathered\", \"blue\",\r\n    \"billowing\", \"broken\", \"cold\", \"damp\", \"falling\", \"frosty\", \"green\", \"long\",\r\n    \"late\", \"lingering\", \"bold\", \"little\", \"morning\", \"muddy\", \"old\", \"red\",\r\n    \"rough\", \"still\", \"small\", \"sparkling\", \"throbbing\", \"shy\", \"wandering\",\r\n    \"withered\", \"wild\", \"black\", \"young\", \"holy\", \"solitary\", \"fragrant\",\r\n    \"aged\", \"snowy\", \"proud\", \"floral\", \"restless\", \"divine\", \"polished\",\r\n    \"ancient\", \"purple\", \"lively\", \"nameless\"\r\n  ];\r\n  const nouns = [\r\n    \"waterfall\", \"river\", \"breeze\", \"moon\", \"rain\", \"wind\", \"sea\", \"morning\",\r\n    \"snow\", \"lake\", \"sunset\", \"pine\", \"shadow\", \"leaf\", \"dawn\", \"glitter\",\r\n    \"forest\", \"hill\", \"cloud\", \"meadow\", \"sun\", \"glade\", \"bird\", \"brook\",\r\n    \"butterfly\", \"bush\", \"dew\", \"dust\", \"field\", \"fire\", \"flower\", \"firefly\",\r\n    \"feather\", \"grass\", \"haze\", \"mountain\", \"night\", \"pond\", \"darkness\",\r\n    \"snowflake\", \"silence\", \"sound\", \"sky\", \"shape\", \"surf\", \"thunder\",\r\n    \"violet\", \"water\", \"wildflower\", \"wave\", \"water\", \"resonance\", \"sun\",\r\n    \"wood\", \"dream\", \"cherry\", \"tree\", \"fog\", \"frost\", \"voice\", \"paper\", \"frog\",\r\n    \"smoke\", \"star\"\r\n  ];\r\n\r\n  const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];\r\n  const noun = nouns[Math.floor(Math.random() * nouns.length)];\r\n  return adjective + noun;\r\n}\r\n\r\nfunction randomColor() {\r\n  return '#' + Math.floor(Math.random() * 0xFFFFFF).toString(16);\r\n}\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    messages: [],\r\n    member: {\r\n      username: randomName(),\r\n      color: randomColor(),\r\n    },\r\n    picArray: [],\r\n    user: null,\r\n  };\r\n\r\n  //chat-pot\r\n  constructor() {\r\n    super();\r\n    this.drone = new window.Scaledrone(\"BmjljJkiutah79dn\", {\r\n      data: this.state.member\r\n    });\r\n    this.drone.on('open', error => {\r\n      if (error) {\r\n        return console.error(error);\r\n      }\r\n      const member = {...this.state.member};\r\n      member.id = this.drone.clientId;\r\n      this.setState({member});\r\n    });\r\n    const room = this.drone.subscribe(\"observable-room\");\r\n    room.on('data', (data, member) => {\r\n      const messages = this.state.messages;\r\n      messages.push({member, text: data});\r\n      this.setState({messages});\r\n    });\r\n  }\r\n  onSendMessage = (message) => {\r\n    this.drone.publish({\r\n      room: \"observable-room\",\r\n      message\r\n    });\r\n  }\r\n//chat-pot end\r\n\r\n  setUser = (user) => {\r\n    getFilesByTag('profile').then((files) => {\r\n      const profilePic = files.filter((file) => {\r\n        let outputFile = null;\r\n        if (file.user_id === this.state.user.user_id) {\r\n          outputFile = file;\r\n        }\r\n        return outputFile;\r\n      });\r\n      this.setState((prevState) => {\r\n        return {\r\n          user: {\r\n            ...prevState.user,\r\n            profilePic: profilePic[0],\r\n          },\r\n        };\r\n      });\r\n    });\r\n    this.setState({user});\r\n  };\r\n\r\n  setUserLogout = (user) => {\r\n    this.setState({user});\r\n  };\r\n\r\n  checkLogin = () => {\r\n    return this.state.user !== null;\r\n  };\r\n\r\n  updateImages = () => {\r\n    getAllMedia().then((pics) => {\r\n      console.log(pics);\r\n      this.setState({picArray: pics});\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.updateImages();\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <Router basename='/~villeope/my-app'>\r\n          <Grid container>\r\n            <Grid item sm={12}>\r\n              <Nav checkLogin={this.checkLogin}/>\r\n            </Grid>\r\n              <Route path=\"/home\" render={(props) => (\r\n                  <Front {...props} messages={this.state.messages} currentMember={this.state.member} picArray={this.state.picArray}/>\r\n              )}/>\r\n              <Route path=\"/upload\" render={(props) => (\r\n                  <Upload {...props} updateImages={this.updateImages}/>\r\n              )}/>\r\n              <Route path=\"/videos\" render={(props) => (\r\n                  <Profile {...props} user={this.state.videos}/>\r\n              )}/>\r\n              <Route path=\"/single/:id\" component={Single}/>\r\n              <Route path=\"/chat\" component={Chat}/>\r\n              <Route path=\"/modify/:id\" component={Modify}/>\r\n              <Route path=\"/profile\" render={(props) => (\r\n                  <Profile {...props} user={this.state.user}/>\r\n              )}/>\r\n              <Route path=\"/my-files\" render={(props) => (\r\n                  <MyFiles {...props} user={this.state.user}/>\r\n              )}/>\r\n              <Route exact path=\"/\" render={(props) => (\r\n                  <Login {...props} setUser={this.setUser}/>\r\n              )}/>\r\n              <Route path=\"/logout\" render={(props) => (\r\n                  <Logout {...props} setUserLogout={this.setUserLogout}/>\r\n              )}/>\r\n          </Grid>\r\n        </Router>\r\n\r\n    );\r\n  }\r\n\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}